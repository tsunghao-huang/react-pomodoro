(this["webpackJsonpreact-pomodoro"]=this["webpackJsonpreact-pomodoro"]||[]).push([[0],{14:function(e,t,a){e.exports=a(21)},19:function(e,t,a){},20:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(2),r=a(0),c=a.n(r),l=a(11),s=a.n(l),i=(a(19),a(6)),d=a(7),m=a(3),u=a(9),p=a(8),g=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{id:"".concat(this.props.value.toLowerCase(),"-panel"),className:"control-panel"},c.a.createElement("button",{className:"btn toggle-btn","aria-pressed":this.props.currentCounting===this.props.value,"aria-label":"set ".concat(this.props.value.toLowerCase()," to default duration."),id:"default-".concat(this.props.value.toLowerCase()),onClick:this.props.handleDefaultBtn},"en"===this.props.lang?this.props.value:this.props.LANG_MAP[this.props.value]),c.a.createElement("div",null,c.a.createElement("button",{"aria-label":"decrement ".concat(this.props.value.toLowerCase()," duration by 1 minute."),id:"".concat(this.props.value.toLowerCase(),"-decrement"),onClick:this.props.handleInDecrement,className:"btn-level"},c.a.createElement("i",{className:"fas fa-arrow-down fa-2x","aria-hidden":"true"})),c.a.createElement("p",{"aria-label":"Custom ".concat(this.props.value),"aria-live":"assertive",id:"".concat(this.props.value.toLowerCase(),"-length"),className:"btn-level"},this.props.length),c.a.createElement("button",{"aria-label":"increment ".concat(this.props.value.toLowerCase()," duration by 1 minute."),id:"".concat(this.props.value.toLowerCase(),"-increment"),onClick:this.props.handleInDecrement,className:"btn-level"},c.a.createElement("i",{className:"fas fa-arrow-up fa-2x","aria-hidden":"true"}))))}}]),a}(c.a.Component);function h(e){var t=c.a.createElement("p",{id:"pomodoro-heading"},"Time to ",e.currentCounting," ",e.currentTask?"".concat("Work"===e.currentCounting?"on":"from"," ").concat(e.currentTask.name):""),a=c.a.createElement("p",{id:"pomodoro-heading"},e.currentTask?"".concat(e.currentTask.name," \u7684"):"",e.LANG_MAP[e.currentCounting].replace(" ",""),"\u6642\u9593");return c.a.createElement("div",{id:"display-panel","aria-label":"display panel"},"en"===e.lang?t:a,c.a.createElement("p",{id:"time-left",role:"timer","aria-label":"Duration for ".concat(e.currentCounting)},e.timeLeft),c.a.createElement("div",null,c.a.createElement("button",{"aria-label":"start ".concat(e.currentCounting),id:"start_stop",onClick:e.handleStartToggle,className:"btn-level"},c.a.createElement("i",{className:"fas ".concat(e.counting?"fa-pause":"fa-play"," fa-3x")})),c.a.createElement("button",{"aria-label":"reset to work, 25 minutes.",id:"reset",onClick:e.handleReset,className:"btn-level"},c.a.createElement("i",{className:"fas fa-redo fa-3x"}))))}var b=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={breakLength:5,workLength:25,timeLeft:1500,counting:!1,currentCounting:"Work",english:!0},n.handleReset=n.handleReset.bind(Object(m.a)(n)),n.clockify=n.clockify.bind(Object(m.a)(n)),n.handleStartToggle=n.handleStartToggle.bind(Object(m.a)(n)),n.tick=n.tick.bind(Object(m.a)(n)),n.handleInDecrement=n.handleInDecrement.bind(Object(m.a)(n)),n.handleDefaultBtn=n.handleDefaultBtn.bind(Object(m.a)(n)),n.handleLanguage=n.handleLanguage.bind(Object(m.a)(n)),n}return Object(d.a)(a,[{key:"handleLanguage",value:function(){this.setState({english:!this.state.english}),this.state.english?document.documentElement.setAttribute("lang","zh-TW"):document.documentElement.setAttribute("lang","en")}},{key:"handleReset",value:function(){this.setState({breakLength:5,workLength:25,timeLeft:1500,counting:!1,currentCounting:"Work"}),clearInterval(this.intervalID);var e=document.getElementById("beep");e.pause(),e.currentTime=0,document.getElementById("time-left").style.color=null,document.getElementsByTagName("title")[0].text="Pomodoro Clock"}},{key:"handleDefaultBtn",value:function(e){this.state.counting||(e.target.id.includes("work")?this.setState({workLength:25,timeLeft:1500,counting:!1,currentCounting:"Work"}):this.setState({breakLength:5,timeLeft:300,counting:!1,currentCounting:"Break"}))}},{key:"handleInDecrement",value:function(e){if(!this.state.counting)switch("".concat(e.currentTarget.id,",current:").concat(this.state.currentCounting)){case"break-decrement,current:Work":return this.state.breakLength>1?void this.setState((function(e){return{breakLength:e.breakLength-1}})):void 0;case"break-increment,current:Work":return this.state.breakLength<60?void this.setState((function(e){return{breakLength:e.breakLength+1}})):void 0;case"break-decrement,current:Break":return this.state.breakLength>1?void this.setState((function(e){return{breakLength:e.breakLength-1,timeLeft:e.timeLeft-60}})):void 0;case"break-increment,current:Break":return this.state.breakLength<60?void this.setState((function(e){return{breakLength:e.breakLength+1,timeLeft:e.timeLeft+60}})):void 0;case"work-decrement,current:Work":return this.state.workLength>1?void this.setState((function(e){return{workLength:e.workLength-1,timeLeft:e.timeLeft-60}})):void 0;case"work-increment,current:Work":return this.state.workLength<60?void this.setState((function(e){return{workLength:e.workLength+1,timeLeft:e.timeLeft+60}})):void 0;case"work-decrement,current:Break":return this.state.workLength>1?void this.setState((function(e){return{workLength:e.workLength-1}})):void 0;case"work-increment,current:Break":return this.state.workLength<60?void this.setState((function(e){return{workLength:e.workLength+1}})):void 0;default:return}}},{key:"tick",value:function(){var e=this;if(this.state.timeLeft<=60?document.getElementById("time-left").style.color="#F8BFCE":document.getElementById("time-left").style.color=null,this.state.timeLeft<=0){clearInterval(this.intervalID),document.getElementById("beep").play();var t="Work"===this.state.currentCounting?"Break":"Work",a="Work"===this.state.currentCounting?60*this.state.breakLength:60*this.state.workLength;return document.getElementById("time-left").style.color=null,this.setState({timeLeft:a,currentCounting:t}),this.intervalID=setInterval((function(){e.tick()}),1e3),void(this.props.currentTask&&"Break"===t&&this.props.updateTaskProgress(this.props.currentTask.id))}this.setState({timeLeft:this.state.timeLeft-1}),document.getElementsByTagName("title")[0].text="(".concat(this.clockify(this.state.timeLeft),") Pomodoro Clock")}},{key:"handleStartToggle",value:function(){var e=this,t=document.getElementById("beep");t.play(),t.pause(),t.currentTime=0,this.state.counting?clearInterval(this.intervalID):this.intervalID=setInterval((function(){e.tick()}),1e3),this.setState((function(t){return{counting:!e.state.counting}}))}},{key:"clockify",value:function(e){var t=Math.floor(e/60),a=e-60*t;return(t=t<10?"0"+t:t)+":"+(a=a<10?"0"+a:a)}},{key:"render",value:function(){var e=this,t=["Break","Work"].map((function(t){return c.a.createElement(g,{value:t,key:"".concat(t,"-panel"),currentCounting:e.state.currentCounting,length:"Break"===t?e.state.breakLength:e.state.workLength,handleInDecrement:e.handleInDecrement,handleDefaultBtn:e.handleDefaultBtn,lang:e.props.lang,LANG_MAP:e.props.LANG_MAP})}));return c.a.createElement("div",{id:"pomodoro-panel"},c.a.createElement("h1",null,"en"===this.props.lang?"Pomodoro":this.props.LANG_MAP.Pomodoro),c.a.createElement(h,{timeLeft:this.clockify(this.state.timeLeft),handleReset:this.handleReset,currentCounting:this.state.currentCounting,lang:this.props.lang,LANG_MAP:this.props.LANG_MAP,handleStartToggle:this.handleStartToggle,counting:this.state.counting,currentTask:this.props.currentTask}),c.a.createElement("div",{id:"control-panels-group",className:"btn-group"},t),c.a.createElement("audio",{id:"beep",preload:"auto",src:"https://raw.githubusercontent.com/tsunghao-huang/react-pomodoro/gh-pages/homeland.mp3"}))}}]),a}(c.a.Component),f=a(12);a(20);var k=function(e){var t=Object(r.useState)(""),a=Object(o.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(""),i=Object(o.a)(s,2),d=i[0],m=i[1];function u(e){"new-todo-input"===e.target.id?l(e.target.value):"new-todo-target-pomodoro"===e.target.id&&m(e.target.value)}return c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),""!==n.replace(/\s*/,"")&&(e.addTask(n,d),l(""),m(""),document.getElementById("new-todo-input").focus())}},c.a.createElement("h2",{className:"label-wrapper"},c.a.createElement("label",{htmlFor:"new-todo-input",className:"label__lg"},"en"===e.lang?"What needs to be done?":e.LANG_MAP["What needs to be done?"])),c.a.createElement("fieldset",{id:"new-todo-fieldset"},c.a.createElement("input",{type:"text",id:"new-todo-input",className:"input input__lg",name:"text",autoComplete:"off",value:n,onChange:u,required:!0,placeholder:"".concat("en"===e.lang?"Todo":e.LANG_MAP.Todo,"?")}),c.a.createElement("input",{type:"number",id:"new-todo-target-pomodoro",className:"input input__lg",value:d,onChange:u,min:"0",max:"57",placeholder:"".concat("en"===e.lang?"Target Pomodoros":e.LANG_MAP["Target Pomodoros"],"?")})),c.a.createElement("button",{type:"submit",className:"btn btn__primary btn__lg"},"en"===e.lang?"Add":e.LANG_MAP.Add))};var v=function(e){return c.a.createElement("button",{type:"button",className:"btn toggle-btn","aria-pressed":e.isPressed,onClick:function(){return e.setFilter(e.name)}},c.a.createElement("span",{className:"visually-hidden"},"Show "),c.a.createElement("span",null,"en"===e.lang?e.name:e.LANG_MAP[e.name]," "),c.a.createElement("span",{className:"visually-hidden"}," tasks"))};function E(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current}function P(e){var t=Object(r.useRef)(null),a=Object(r.useRef)(null),n=Object(r.useState)(!1),l=Object(o.a)(n,2),s=l[0],i=l[1],d=Object(r.useState)(e.name),m=Object(o.a)(d,2),u=m[0],p=m[1],g=Object(r.useState)(e.targetPomodoros),h=Object(o.a)(g,2),b=h[0],f=h[1],k=Object(r.useState)(e.completedPomodoros),v=Object(o.a)(k,2),P=v[0],L=v[1],N=E(s);function A(e){e.stopPropagation(),e.target.id.includes("completed-pomodoros")?L(e.target.value):e.target.id.includes("target-pomodoros")?f(e.target.value):p(e.target.value)}function O(e,t){e.stopPropagation(),i(t)}var j=c.a.createElement("form",{className:"stack-small"},c.a.createElement("div",{className:"form-group"},c.a.createElement("fieldset",{className:"todo-fieldset"},c.a.createElement("label",{className:"todo-label",htmlFor:e.id},"en"===e.lang?"New name for ".concat(e.name):"".concat(e.name," \u7684\u65b0\u540d\u5b57")),c.a.createElement("input",{id:e.id,className:"input input__lg edit-todo-name",type:"text",value:u,onChange:A,ref:t,required:!0}),c.a.createElement("div",{className:"edit-todo-pomodoros"},c.a.createElement("label",{className:"todo-label todo-label-pomodoros",htmlFor:"".concat(e.id,"-completed-pomodoros")},"en"===e.lang?"Completed Pomodoros":e.LANG_MAP["Completed Pomodoros"]),c.a.createElement("input",{id:"".concat(e.id,"-completed-pomodoros"),className:"input input__lg edit-todo-completed-pomodoros",type:"number",value:P,onChange:A,min:"0",max:b,placeholder:"Pomodoros?"})),c.a.createElement("div",{className:"edit-todo-pomodoros"},c.a.createElement("label",{className:"todo-label todo-label-pomodoros",htmlFor:"".concat(e.id,"-target-pomodoros")},"en"===e.lang?"Target Pomodoros":e.LANG_MAP["Target Pomodoros"]),c.a.createElement("input",{id:"".concat(e.id,"-target-pomodoros"),className:"input input__lg edit-todo-target-pomodoros",type:"number",value:b,onChange:A,min:P,max:"57",placeholder:"Pomodoros?"})))),c.a.createElement("div",{className:"todo-btn-group"},c.a.createElement("button",{type:"button",className:"btn todo-cancel",onClick:function(e){return O(e,!1)}},c.a.createElement("i",{className:"fas fa-times","aria-hidden":"true"}),c.a.createElement("span",{className:"visually-hidden"},"en"===e.lang?"Cancel":e.LANG_MAP.Cancel,"renaming ",e.name)),c.a.createElement("button",{type:"submit",className:"btn btn__primary todo-edit",onClick:function(t){return function(t){t.stopPropagation(),t.preventDefault(),""!==u.replace(/\s*/,"")&&(e.editTask(e.id,u,P,b),i(!1))}(t)}},c.a.createElement("i",{className:"far fa-save","aria-hidden":"true"}),c.a.createElement("span",{className:"visually-hidden"},"en"===e.lang?"Save":e.LANG_MAP.Save,"new name for ",e.name)))),y=c.a.createElement("div",{className:"stack-small"},c.a.createElement("div",{className:"c-cb"},c.a.createElement("button",{type:"button",className:"btn check-btn",onClick:function(t){return e.toggleTaskCompleted(t,e.id)}},c.a.createElement("i",{className:"".concat(e.completed?"fas fa-check-circle":"far fa-circle"),"aria-hidden":"true"}),c.a.createElement("span",{className:"visually-hidden"},"en"===e.lang?"Edit":e.LANG_MAP.Edit,e.name)),c.a.createElement("div",{className:"todo-label ".concat(e.completed?"todo-label-checked":""),htmlFor:e.id},c.a.createElement("span",{className:"todo-label-name"},e.name),c.a.createElement("span",{className:"todo-label-progress"},0===e.targetPomodoros|""===e.targetPomodoros?"":"".concat("en"===e.lang?"Progress":e.LANG_MAP.Progress,": ").concat(e.completedPomodoros?e.completedPomodoros:0,"/").concat(e.targetPomodoros)))),c.a.createElement("div",{className:"todo-btn-group"},c.a.createElement("button",{type:"button",className:"btn btn__danger",onClick:function(t){return e.deleteTask(t,e.id)}},c.a.createElement("i",{className:"fas fa-trash-alt","aria-hidden":"true"}),c.a.createElement("span",{className:"visually-hidden"},"en"===e.lang?"Delete":e.LANG_MAP.Delete,e.name)),c.a.createElement("button",{type:"button",className:"btn",onClick:function(e){return O(e,!0)},ref:a},c.a.createElement("i",{className:"fas fa-pencil-alt","aria-hidden":"true"}),c.a.createElement("span",{className:"visually-hidden"},"en"===e.lang?"Edit":e.LANG_MAP.Edit,e.name))));return Object(r.useEffect)((function(){!N&&s&&(t.current.select(),t.current.focus(),p(e.name),L(e.completedPomodoros),f(e.targetPomodoros)),N&&!s&&a.current.focus()}),[N,s,e.name,e.completedPomodoros,e.targetPomodoros]),c.a.createElement("li",{id:"li-".concat(e.id),className:"todo stack-small ".concat(e.current?"todo-selected":""),onClick:function(){return e.updateCurrentTask(e.id)}},s?j:y)}var L=a(13),N={All:function(){return!0},Active:function(e){return!e.completed},Completed:function(e){return e.completed}},A=Object.keys(N);function O(e){var t=e.tasks,a=Object(r.useState)("All"),l=Object(o.a)(a,2),s=l[0],i=l[1];function d(a,o){a.stopPropagation();var r=t.map((function(e){return o===e.id?Object(n.a)(Object(n.a)({},e),{},{completed:!e.completed}):e})).map((function(e){return e.completed?Object(n.a)(Object(n.a)({},e),{},{completedPomodoros:parseInt(e.targetPomodoros)}):e.completedPomodoros===e.targetPomodoros?Object(n.a)(Object(n.a)({},e),{},{completedPomodoros:0}):e}));e.setTasks(r)}function m(a){var o=t.map((function(e){return a===e.id?Object(n.a)(Object(n.a)({},e),{},{current:!0}):Object(n.a)(Object(n.a)({},e),{},{current:!1})}));e.setTasks(o)}function u(a,n){a.stopPropagation();var o=t.filter((function(e){return n!==e.id}));e.setTasks(o)}function p(a,o,r,c){var l=o.replace(/(^\s*)|(\s*$)/g,""),s=t.map((function(e){return a===e.id?Object(n.a)(Object(n.a)({},e),{name:l,completedPomodoros:""===r?0:parseInt(r),targetPomodoros:""===c?0:parseInt(c)}):e})).map((function(e){return 0!==e.targetPomodoros&&e.targetPomodoros===e.completedPomodoros?Object(n.a)(Object(n.a)({},e),{},{completed:!0}):0!==e.targetPomodoros&&e.targetPomodoros!==e.completedPomodoros?Object(n.a)(Object(n.a)({},e),{},{completed:!1}):e}));e.setTasks(s)}var g,h=t.filter(N[s]).map((function(t){return c.a.createElement(P,{id:t.id,name:t.name,completed:t.completed,key:t.id,toggleTaskCompleted:d,deleteTask:u,editTask:p,lang:e.lang,LANG_MAP:e.LANG_MAP,completedPomodoros:t.completedPomodoros,targetPomodoros:t.targetPomodoros,updateCurrentTask:m,current:t.current})})),b=A.map((function(t){return c.a.createElement(v,{key:t,name:t,isPressed:t===s,setFilter:i,lang:e.lang,LANG_MAP:e.LANG_MAP})})),O=1!==h.length?"tasks":"task";if("en"===e.lang)switch(s){case"All":g="".concat(h.length," ").concat(O," in total");break;default:g="".concat(h.length," ").concat(O," ").concat(s.toLowerCase())}else g="".concat(e.LANG_MAP[s]," ").concat(h.length," \u4ef6\u4e8b");var j=Object(r.useRef)(null),y=E(t.length);return Object(r.useEffect)((function(){t.length-y===-1&&j.current.focus()}),[t.length,y]),c.a.createElement("div",{id:"todoapp",className:"stack-large"},c.a.createElement("h1",null,"en"===e.lang?"Todos":e.LANG_MAP.Todos),c.a.createElement(k,{addTask:function(a,n){var o=a.replace(/(^\s*)|(\s*$)/g,""),r={id:"todo-"+Object(L.a)(),name:o,completed:!1,completedPomodoros:0,targetPomodoros:""===n?0:parseInt(n)};e.setTasks([].concat(Object(f.a)(t),[r]))},lang:e.lang,LANG_MAP:e.LANG_MAP}),c.a.createElement("div",{className:"filters btn-group stack-exception"},b),c.a.createElement("h2",{id:"list-heading",tabIndex:"-1",ref:j},g),c.a.createElement("ul",{role:"list",className:"todo-list stack-large stack-exception","aria-labelledby":"list-heading"},h))}var j=[{id:"todo-0",name:"Eat",completed:!0,completedPomodoros:2,targetPomodoros:2,current:!0},{id:"todo-1",name:"Sleep",completed:!1,completedPomodoros:0,targetPomodoros:0,current:!1},{id:"todo-2",name:"Repeat",completed:!1,completedPomodoros:0,targetPomodoros:0,current:!1}],y={Pomodoro:"\u8543 \u8304 \u9418",Work:"\u5de5 \u4f5c",Break:"\u4f11 \u606f",Todos:"\u5f85\u8fa6\u4e8b\u9805",Todo:"\u5f85\u8fa6\u4e8b\u9805","What needs to be done?":"\u6709\u4e8b\u55ce\uff1f",Add:"\u65b0\u589e",All:"\u5168\u90e8",Active:"\u5f85\u8fa6",Completed:"\u5b8c\u6210",Edit:"\u7de8\u8f2f",Delete:"\u522a\u9664",Check:"\u6a19\u8a18\u5b8c\u6210",Cancel:"\u53d6\u6d88",Save:"\u5132\u5b58",Progress:"\u9032\u5ea6","Target Pomodoros":"\u76ee\u6a19\u756a\u8304\u6578","Completed Pomodoros":"\u5b8c\u6210\u756a\u8304\u6578"};function C(){null===localStorage.getItem("localTodo")&&localStorage.setItem("localTodo",JSON.stringify(j));var e=JSON.parse(localStorage.getItem("localTodo")),t=Object(r.useState)(e),a=Object(o.a)(t,2),l=a[0],s=a[1],i=Object(r.useState)("en"),d=Object(o.a)(i,2),m=d[0],u=d[1],p=Object(r.useState)(l.filter((function(e){return e.current}))[0]),g=Object(o.a)(p,2),h=g[0],f=g[1];return Object(r.useEffect)((function(){var e;e=l,localStorage.setItem("localTodo",JSON.stringify(e)),f(l.filter((function(e){return e.current}))[0])}),[l]),Object(r.useEffect)((function(){document.documentElement.setAttribute("lang",m)}),[m]),c.a.createElement("div",{id:"App"},c.a.createElement("button",{"aria-label":"switch language to ".concat("en"===m?"Mandarin":"English"),id:"language-btn",onClick:function(){u("en"===m?"zh-TW":"en")}},"en"===m?"\u7e41\u9ad4\u4e2d\u6587":"English"),c.a.createElement(b,{lang:m,LANG_MAP:y,currentTask:h,updateTaskProgress:function(e){var t=l.map((function(t){return e===t.id&&t.completedPomodoros!==t.targetPomodoros?Object(n.a)(Object(n.a)({},t),{completedPomodoros:t.completedPomodoros+1}):t})).map((function(e){return 0!==e.targetPomodoros&&e.targetPomodoros===e.completedPomodoros?Object(n.a)(Object(n.a)({},e),{},{completed:!0}):0!==e.targetPomodoros&&e.targetPomodoros!==e.completedPomodoros?Object(n.a)(Object(n.a)({},e),{},{completed:!1}):e}));s(t)}}),c.a.createElement(O,{tasks:l,lang:m,LANG_MAP:y,setTasks:s}))}s.a.render(c.a.createElement(C,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.89b494f0.chunk.js.map