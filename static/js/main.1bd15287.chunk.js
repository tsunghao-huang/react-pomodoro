(this["webpackJsonpreact-pomodoro"]=this["webpackJsonpreact-pomodoro"]||[]).push([[0],{14:function(e,t,n){e.exports=n(21)},19:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n(0),o=n.n(s),i=n(12),l=n.n(i),r=(n(19),n(6)),c=n(7),u=n(3),m=n(9),d=n(8),g=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{id:"".concat(this.props.value.toLowerCase(),"-panel"),className:"control-panel"},o.a.createElement("button",{"aria-label":"set ".concat(this.props.value.toLowerCase()," to default duration."),id:"default-".concat(this.props.value.toLowerCase()),onClick:this.props.handleDefaultBtn},"en"===this.props.lang?this.props.value:this.props.LANG_MAP[this.props.value]),o.a.createElement("div",null,o.a.createElement("button",{"aria-label":"decrement ".concat(this.props.value.toLowerCase()," duration by 1 minute."),id:"".concat(this.props.value.toLowerCase(),"-decrement"),onClick:this.props.handleInDecrement,className:"btn-level"},o.a.createElement("i",{className:"fa fa-arrow-down fa-2x","aria-hidden":"true"})),o.a.createElement("p",{"aria-label":"Custom ".concat(this.props.value),"aria-live":"assertive",id:"".concat(this.props.value.toLowerCase(),"-length"),className:"btn-level"},this.props.length),o.a.createElement("button",{"aria-label":"increment ".concat(this.props.value.toLowerCase()," duration by 1 minute."),id:"".concat(this.props.value.toLowerCase(),"-increment"),onClick:this.props.handleInDecrement,className:"btn-level"},o.a.createElement("i",{className:"fa fa-arrow-up fa-2x","aria-hidden":"true"}))))}}]),n}(o.a.Component);function p(e){return o.a.createElement("div",{id:"display-panel","aria-label":"display panel"},o.a.createElement("p",{id:"timer-label","aria-label":"Currently counting for ".concat(e.currentCounting)},"en"===e.lang?e.currentCounting:e.LANG_MAP[e.currentCounting]),o.a.createElement("p",{id:"time-left",role:"timer","aria-label":"Duration for ".concat(e.currentCounting)},e.timeLeft),o.a.createElement("div",null,o.a.createElement("button",{"aria-label":"start ".concat(e.currentCounting),id:"start_stop",onClick:e.handleStartToggle,className:"btn-level"},o.a.createElement("i",{className:"fa fa-play fa-3x"}),o.a.createElement("i",{className:"fa fa-pause fa-3x"})),o.a.createElement("button",{"aria-label":"reset to session, 25 minutes.",id:"reset",onClick:e.handleReset,className:"btn-level"},o.a.createElement("i",{className:"fa fa-refresh fa-3x"}))))}var h=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={breakLength:5,sessionLength:25,timeLeft:1500,counting:!1,currentCounting:"Session",english:!0},a.handleReset=a.handleReset.bind(Object(u.a)(a)),a.clockify=a.clockify.bind(Object(u.a)(a)),a.handleStartToggle=a.handleStartToggle.bind(Object(u.a)(a)),a.tick=a.tick.bind(Object(u.a)(a)),a.handleInDecrement=a.handleInDecrement.bind(Object(u.a)(a)),a.handleDefaultBtn=a.handleDefaultBtn.bind(Object(u.a)(a)),a.handleLanguage=a.handleLanguage.bind(Object(u.a)(a)),a}return Object(c.a)(n,[{key:"handleLanguage",value:function(){this.setState({english:!this.state.english}),this.state.english?document.documentElement.setAttribute("lang","zh-TW"):document.documentElement.setAttribute("lang","en")}},{key:"handleReset",value:function(){this.setState({breakLength:5,sessionLength:25,timeLeft:1500,counting:!1,currentCounting:"Session"}),clearInterval(this.intervalID);var e=document.getElementById("beep");e.pause(),e.currentTime=0,document.getElementById("time-left").style.color=null,document.getElementsByTagName("title")[0].text="Pomodoro Clock"}},{key:"handleDefaultBtn",value:function(e){this.state.counting||(e.target.id.includes("session")?this.setState({sessionLength:25,timeLeft:1500,counting:!1,currentCounting:"Session"}):this.setState({breakLength:5,timeLeft:300,counting:!1,currentCounting:"Break"}))}},{key:"handleInDecrement",value:function(e){if(!this.state.counting)switch("".concat(e.currentTarget.id,",current:").concat(this.state.currentCounting)){case"break-decrement,current:Session":return this.state.breakLength>1?void this.setState((function(e){return{breakLength:e.breakLength-1}})):void 0;case"break-increment,current:Session":return this.state.breakLength<60?void this.setState((function(e){return{breakLength:e.breakLength+1}})):void 0;case"break-decrement,current:Break":return this.state.breakLength>1?void this.setState((function(e){return{breakLength:e.breakLength-1,timeLeft:e.timeLeft-60}})):void 0;case"break-increment,current:Break":return this.state.breakLength<60?void this.setState((function(e){return{breakLength:e.breakLength+1,timeLeft:e.timeLeft+60}})):void 0;case"session-decrement,current:Session":return this.state.sessionLength>1?void this.setState((function(e){return{sessionLength:e.sessionLength-1,timeLeft:e.timeLeft-60}})):void 0;case"session-increment,current:Session":return this.state.sessionLength<60?void this.setState((function(e){return{sessionLength:e.sessionLength+1,timeLeft:e.timeLeft+60}})):void 0;case"session-decrement,current:Break":return this.state.sessionLength>1?void this.setState((function(e){return{sessionLength:e.sessionLength-1}})):void 0;case"session-increment,current:Break":return this.state.sessionLength<60?void this.setState((function(e){return{sessionLength:e.sessionLength+1}})):void 0;default:return}}},{key:"tick",value:function(){var e=this;if(this.state.timeLeft<=60?document.getElementById("time-left").style.color="#F8BFCE":document.getElementById("time-left").style.color=null,this.state.timeLeft<=0){clearInterval(this.intervalID),document.getElementById("beep").play();var t="Session"===this.state.currentCounting?"Break":"Session",n="Session"===this.state.currentCounting?60*this.state.breakLength:60*this.state.sessionLength;return document.getElementById("time-left").style.color=null,this.setState({timeLeft:n,currentCounting:t}),void(this.intervalID=setInterval((function(){e.tick()}),1e3))}this.setState({timeLeft:this.state.timeLeft-1}),document.getElementsByTagName("title")[0].text="(".concat(this.clockify(this.state.timeLeft),") Pomodoro Clock")}},{key:"handleStartToggle",value:function(){var e=this,t=document.getElementById("beep");t.play(),t.pause(),t.currentTime=0,this.state.counting?clearInterval(this.intervalID):this.intervalID=setInterval((function(){e.tick()}),1e3),this.setState((function(t){return{counting:!e.state.counting}}))}},{key:"clockify",value:function(e){var t=Math.floor(e/60),n=e-60*t;return(t=t<10?"0"+t:t)+":"+(n=n<10?"0"+n:n)}},{key:"render",value:function(){var e=this,t=["Break","Session"].map((function(t){return o.a.createElement(g,{value:t,key:"".concat(t,"-panel"),currentCounting:e.state.currentCounting,length:"Break"===t?e.state.breakLength:e.state.sessionLength,handleInDecrement:e.handleInDecrement,handleDefaultBtn:e.handleDefaultBtn,lang:e.props.lang,LANG_MAP:e.props.LANG_MAP})}));return o.a.createElement("div",{id:"pomodoro-panel"},o.a.createElement("h1",null,"en"===this.props.lang?"Pomodoro Clock":this.props.LANG_MAP["Pomodoro Clock"]),o.a.createElement(p,{timeLeft:this.clockify(this.state.timeLeft),handleReset:this.handleReset,currentCounting:this.state.currentCounting,lang:this.props.lang,LANG_MAP:this.props.LANG_MAP}),o.a.createElement("div",{id:"control-panels-group",className:"btn-group"},t),o.a.createElement("audio",{id:"beep",preload:"auto",src:"https://raw.githubusercontent.com/tsunghao-huang/react-pomodoro/gh-pages/homeland.mp3"}))}}]),n}(o.a.Component),b=n(2),f=n(10);n(20);var v=function(e){var t=Object(s.useState)(""),n=Object(a.a)(t,2),i=n[0],l=n[1],r=Object(s.useState)(""),c=Object(a.a)(r,2),u=c[0],m=c[1];function d(e){"new-todo-input"===e.target.id?l(e.target.value):"new-todo-target-session"===e.target.id&&m(e.target.value)}return o.a.createElement("form",{onSubmit:function(t){t.preventDefault(),""!==i.replace(/\s*/,"")&&(e.addTask(i,u),l(""))}},o.a.createElement("h2",{className:"label-wrapper"},o.a.createElement("label",{htmlFor:"new-todo-input",className:"label__lg"},"en"===e.lang?"What needs to be done?":e.LANG_MAP["What needs to be done?"])),o.a.createElement("fieldset",{id:"new-todo-fieldset"},o.a.createElement("input",{type:"text",id:"new-todo-input",className:"input input__lg",name:"text",autoComplete:"off",value:i,onChange:d,required:!0}),o.a.createElement("input",{type:"number",id:"new-todo-target-session",className:"input input__lg",value:u,onChange:d,min:"0",max:"57",placeholder:"".concat("en"===e.lang?"Target sessions":e.LANG_MAP["Target sessions"],"?")})),o.a.createElement("button",{type:"submit",className:"btn btn__primary btn__lg"},"en"===e.lang?"Add":e.LANG_MAP.Add))};var E=function(e){return o.a.createElement("button",{type:"button",className:"btn toggle-btn","aria-pressed":e.isPressed,onClick:function(){return e.setFilter(e.name)}},o.a.createElement("span",{className:"visually-hidden"},"Show "),o.a.createElement("span",null,"en"===e.lang?e.name:e.LANG_MAP[e.name]," "),o.a.createElement("span",{className:"visually-hidden"}," tasks"))};function k(e){var t=Object(s.useRef)();return Object(s.useEffect)((function(){t.current=e})),t.current}function L(e){var t=Object(s.useRef)(null),n=Object(s.useRef)(null),i=Object(s.useState)(!1),l=Object(a.a)(i,2),r=l[0],c=l[1],u=Object(s.useState)(e.name),m=Object(a.a)(u,2),d=m[0],g=m[1],p=Object(s.useState)(e.targetSessions),h=Object(a.a)(p,2),b=h[0],f=h[1],v=Object(s.useState)(e.completedSessions),E=Object(a.a)(v,2),L=E[0],N=E[1],S=k(r);function A(e){e.target.id.includes("completed-sessions")?N(e.target.value):e.target.id.includes("target-sessions")?f(e.target.value):g(e.target.value)}var y=o.a.createElement("form",{className:"stack-small",onSubmit:function(t){t.preventDefault(),""!==d.replace(/\s*/,"")&&(e.editTask(e.id,d,L,b),c(!1))}},o.a.createElement("div",{className:"form-group"},o.a.createElement("fieldset",{className:"todo-fieldset"},o.a.createElement("label",{className:"todo-label",htmlFor:e.id},"en"===e.lang?"New name for ".concat(e.name):"".concat(e.name," \u7684\u65b0\u540d\u5b57")),o.a.createElement("input",{id:e.id,className:"input input__lg edit-todo-name",type:"text",value:d,onChange:A,ref:t,required:!0}),o.a.createElement("div",{className:"edit-todo-sessions"},o.a.createElement("label",{className:"todo-label todo-label-sessions",htmlFor:"".concat(e.id,"-completed-sessions")},"en"===e.lang?"Completed sessions":e.LANG_MAP["Completed sessions"]),o.a.createElement("input",{id:"".concat(e.id,"-completed-sessions"),className:"input input__lg edit-todo-completed-sessions",type:"number",value:L,onChange:A,min:"0",max:b,placeholder:"Sessions?"})),o.a.createElement("div",{className:"edit-todo-sessions"},o.a.createElement("label",{className:"todo-label todo-label-sessions",htmlFor:"".concat(e.id,"-target-sessions")},"en"===e.lang?"Target sessions":e.LANG_MAP["Target sessions"]),o.a.createElement("input",{id:"".concat(e.id,"-target-sessions"),className:"input input__lg edit-todo-target-sessions",type:"number",value:b,onChange:A,min:L,max:"57",placeholder:"Sessions?"})))),o.a.createElement("div",{className:"todo-btn-group"},o.a.createElement("button",{type:"button",className:"btn todo-cancel",onClick:function(){return c(!1)}},o.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"}),o.a.createElement("span",{className:"visually-hidden"},"en"===e.lang?"Cancel":e.LANG_MAP.Cancel,"renaming ",e.name)),o.a.createElement("button",{type:"submit",className:"btn btn__primary todo-edit"},o.a.createElement("i",{className:"fa fa-floppy-o","aria-hidden":"true"}),o.a.createElement("span",{className:"visually-hidden"},"en"===e.lang?"Save":e.LANG_MAP.Save,"new name for ",e.name)))),C=o.a.createElement("div",{className:"stack-small"},o.a.createElement("div",{className:"c-cb"},o.a.createElement("button",{id:e.id,type:"button",className:"btn check-btn",onClick:function(){return e.toggleTaskCompleted(e.id)}},o.a.createElement("i",{className:"fa ".concat(e.completed?"fa-check-circle":"fa-circle-o"),"aria-hidden":"true"}),o.a.createElement("span",{className:"visually-hidden"},"en"===e.lang?"Edit":e.LANG_MAP.Edit,e.name)),o.a.createElement("div",{className:"todo-label ".concat(e.completed?"todo-label-checked":""),htmlFor:e.id},o.a.createElement("span",{className:"todo-label-name"},e.name),o.a.createElement("span",{className:"todo-label-progress"},0===e.targetSessions|""===e.targetSessions?"":"".concat("en"===e.lang?"Progress":e.LANG_MAP.Progress,": ").concat(e.completedSessions?e.completedSessions:0,"/").concat(e.targetSessions)))),o.a.createElement("div",{className:"todo-btn-group"},o.a.createElement("button",{type:"button",className:"btn",onClick:function(){return c(!0)},ref:n},o.a.createElement("i",{className:"fa fa-pencil","aria-hidden":"true"}),o.a.createElement("span",{className:"visually-hidden"},"en"===e.lang?"Edit":e.LANG_MAP.Edit,e.name)),o.a.createElement("button",{type:"button",className:"btn btn__danger",onClick:function(){return e.deleteTask(e.id)}},o.a.createElement("i",{className:"fa fa-trash","aria-hidden":"true"}),o.a.createElement("span",{className:"visually-hidden"},"en"===e.lang?"Delete":e.LANG_MAP.Delete,e.name))));return Object(s.useEffect)((function(){!S&&r&&(t.current.select(),t.current.focus(),g(e.name),N(e.completedSessions),f(e.targetSessions)),S&&!r&&n.current.focus()}),[S,r,e.name,e.completedSessions,e.targetSessions]),o.a.createElement("li",{className:"todo stack-small"},r?y:C)}var N=n(13),S={All:function(){return!0},Active:function(e){return!e.completed},Completed:function(e){return e.completed}},A=Object.keys(S);function y(e){var t=Object(s.useState)(e.tasks),n=Object(a.a)(t,2),i=n[0],l=n[1],r=Object(s.useState)("All"),c=Object(a.a)(r,2),u=c[0],m=c[1];function d(e){var t=i.map((function(t){return e===t.id?Object(b.a)(Object(b.a)({},t),{},{completed:!t.completed}):t})).map((function(e){return e.completed?Object(b.a)(Object(b.a)({},e),{},{completedSessions:parseInt(e.targetSessions)}):e.completedSessions===e.targetSessions?Object(b.a)(Object(b.a)({},e),{},{completedSessions:0}):e}));l(t)}function g(e){var t=i.filter((function(t){return e!==t.id}));l(t)}function p(e,t,n,a){var s=t.replace(/(^\s*)|(\s*$)/g,""),o=i.map((function(t){return e===t.id?Object(b.a)(Object(b.a)({},t),{name:s,completedSessions:""===n?0:parseInt(n),targetSessions:""===a?0:parseInt(a)}):t})).map((function(e){return 0!==e.targetSessions&&e.targetSessions===e.completedSessions?Object(b.a)(Object(b.a)({},e),{},{completed:!0}):0!==e.targetSessions&&e.targetSessions!==e.completedSessions?Object(b.a)(Object(b.a)({},e),{},{completed:!1}):e}));l(o)}var h,y=i.filter(S[u]).map((function(t){return o.a.createElement(L,{id:t.id,name:t.name,completed:t.completed,key:t.id,toggleTaskCompleted:d,deleteTask:g,editTask:p,lang:e.lang,LANG_MAP:e.LANG_MAP,completedSessions:t.completedSessions,targetSessions:t.targetSessions})})),C=A.map((function(t){return o.a.createElement(E,{key:t,name:t,isPressed:t===u,setFilter:m,lang:e.lang,LANG_MAP:e.LANG_MAP})})),j=1!==y.length?"tasks":"task";if("en"===e.lang)switch(u){case"All":h="".concat(y.length," ").concat(j," in total");break;default:h="".concat(y.length," ").concat(j," ").concat(u.toLowerCase())}else h="".concat(e.LANG_MAP[u]," ").concat(y.length," \u4ef6\u4e8b");var O=Object(s.useRef)(null),_=k(i.length);return Object(s.useEffect)((function(){i.length-_===-1&&O.current.focus()}),[i.length,_]),o.a.createElement("div",{id:"todoapp",className:"stack-large"},o.a.createElement("h1",null,"en"===e.lang?"Todos":e.LANG_MAP.Todos),o.a.createElement(v,{addTask:function(e,t){var n=e.replace(/(^\s*)|(\s*$)/g,""),a={id:"todo-"+Object(N.a)(),name:n,completed:!1,completedSessions:0,targetSessions:""===t?0:parseInt(t)};l([].concat(Object(f.a)(i),[a])),[].concat(Object(f.a)(i),[a])},lang:e.lang,LANG_MAP:e.LANG_MAP}),o.a.createElement("div",{className:"filters btn-group stack-exception"},C),o.a.createElement("h2",{id:"list-heading",tabIndex:"-1",ref:O},h),o.a.createElement("ul",{role:"list",className:"todo-list stack-large stack-exception","aria-labelledby":"list-heading"},y))}var C=[{id:"todo-0",name:"Eat",completed:!0,completedSessions:2,targetSessions:2},{id:"todo-1",name:"Sleep",completed:!1,completedSessions:0,targetSessions:0},{id:"todo-2",name:"Repeat",completed:!1,completedSessions:0,targetSessions:0}],j={"Pomodoro Clock":"\u8543 \u8304 \u9418",Session:"\u5de5 \u4f5c",Break:"\u4f11 \u606f",Todos:"\u5f85\u8fa6\u4e8b\u9805","What needs to be done?":"\u6709\u4e8b\u55ce\uff1f",Add:"\u65b0\u589e",All:"\u5168\u90e8",Active:"\u5f85\u8fa6",Completed:"\u5b8c\u6210",Edit:"\u7de8\u8f2f",Delete:"\u522a\u9664",Check:"\u6a19\u8a18\u5b8c\u6210",Cancel:"\u53d6\u6d88",Save:"\u5132\u5b58",Progress:"\u9032\u5ea6","Target sessions":"\u76ee\u6a19\u756a\u8304\u6578","Completed sessions":"\u5b8c\u6210\u756a\u8304\u6578"};function O(){var e=Object(s.useState)("en"),t=Object(a.a)(e,2),n=t[0],i=t[1];return Object(s.useEffect)((function(){document.documentElement.setAttribute("lang",n)}),[n]),o.a.createElement("div",{id:"App"},o.a.createElement("button",{"aria-label":"switch language to ".concat("en"===n?"Mandarin":"English"),id:"language-btn",onClick:function(){i("en"===n?"zh-TW":"en")}},"en"===n?"\u7e41\u9ad4\u4e2d\u6587":"English"),o.a.createElement(h,{lang:n,LANG_MAP:j}),o.a.createElement(y,{tasks:C,lang:n,LANG_MAP:j}))}l.a.render(o.a.createElement(O,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.1bd15287.chunk.js.map