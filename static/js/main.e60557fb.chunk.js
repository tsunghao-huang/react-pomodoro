(this["webpackJsonpreact-pomodoro"]=this["webpackJsonpreact-pomodoro"]||[]).push([[0],{14:function(e,t,n){e.exports=n(21)},19:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),s=n.n(r),l=n(12),o=n.n(l),c=(n(19),n(6)),i=n(7),u=n(2),m=n(9),d=n(8),h=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return s.a.createElement("div",{id:"".concat(this.props.value.toLowerCase(),"-panel"),className:"control-panel"},s.a.createElement("button",{"aria-label":"set ".concat(this.props.value.toLowerCase()," to default duration."),id:"default-".concat(this.props.value.toLowerCase()),onClick:this.props.handleDefaultBtn},"en"===this.props.lang?this.props.value:this.props.LANG_MAP[this.props.value]),s.a.createElement("div",null,s.a.createElement("button",{"aria-label":"decrement ".concat(this.props.value.toLowerCase()," duration by 1 minute."),id:"".concat(this.props.value.toLowerCase(),"-decrement"),onClick:this.props.handleInDecrement,className:"btn-level"},s.a.createElement("i",{className:"fa fa-arrow-down fa-2x","aria-hidden":"true"})),s.a.createElement("p",{"aria-label":"Custom ".concat(this.props.value),"aria-live":"assertive",id:"".concat(this.props.value.toLowerCase(),"-length"),className:"btn-level"},this.props.length),s.a.createElement("button",{"aria-label":"increment ".concat(this.props.value.toLowerCase()," duration by 1 minute."),id:"".concat(this.props.value.toLowerCase(),"-increment"),onClick:this.props.handleInDecrement,className:"btn-level"},s.a.createElement("i",{className:"fa fa-arrow-up fa-2x","aria-hidden":"true"}))))}}]),n}(s.a.Component);function g(e){return s.a.createElement("div",{id:"display-panel","aria-label":"display panel"},s.a.createElement("p",{id:"timer-label","aria-label":"Currently counting for ".concat(e.currentCounting)},"en"===e.lang?e.currentCounting:e.LANG_MAP[e.currentCounting]),s.a.createElement("p",{id:"time-left",role:"timer","aria-label":"Duration for ".concat(e.currentCounting)},e.timeLeft),s.a.createElement("div",null,s.a.createElement("button",{"aria-label":"start ".concat(e.currentCounting),id:"start_stop",onClick:e.handleStartToggle,className:"btn-level"},s.a.createElement("i",{className:"fa fa-play fa-3x"}),s.a.createElement("i",{className:"fa fa-pause fa-3x"})),s.a.createElement("button",{"aria-label":"reset to session, 25 minutes.",id:"reset",onClick:e.handleReset,className:"btn-level"},s.a.createElement("i",{className:"fa fa-refresh fa-3x"}))))}var f=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={breakLength:5,sessionLength:25,timeLeft:1500,counting:!1,currentCounting:"Session",english:!0},a.handleReset=a.handleReset.bind(Object(u.a)(a)),a.clockify=a.clockify.bind(Object(u.a)(a)),a.handleStartToggle=a.handleStartToggle.bind(Object(u.a)(a)),a.tick=a.tick.bind(Object(u.a)(a)),a.handleInDecrement=a.handleInDecrement.bind(Object(u.a)(a)),a.handleDefaultBtn=a.handleDefaultBtn.bind(Object(u.a)(a)),a.handleLanguage=a.handleLanguage.bind(Object(u.a)(a)),a}return Object(i.a)(n,[{key:"handleLanguage",value:function(){this.setState({english:!this.state.english}),this.state.english?document.documentElement.setAttribute("lang","zh-TW"):document.documentElement.setAttribute("lang","en")}},{key:"handleReset",value:function(){this.setState({breakLength:5,sessionLength:25,timeLeft:1500,counting:!1,currentCounting:"Session"}),clearInterval(this.intervalID);var e=document.getElementById("beep");e.pause(),e.currentTime=0,document.getElementById("time-left").style.color=null,document.getElementsByTagName("title")[0].text="Pomodoro Clock"}},{key:"handleDefaultBtn",value:function(e){this.state.counting||(e.target.id.includes("session")?this.setState({sessionLength:25,timeLeft:1500,counting:!1,currentCounting:"Session"}):this.setState({breakLength:5,timeLeft:300,counting:!1,currentCounting:"Break"}))}},{key:"handleInDecrement",value:function(e){if(!this.state.counting)switch("".concat(e.currentTarget.id,",current:").concat(this.state.currentCounting)){case"break-decrement,current:Session":return this.state.breakLength>1?void this.setState((function(e){return{breakLength:e.breakLength-1}})):void 0;case"break-increment,current:Session":return this.state.breakLength<60?void this.setState((function(e){return{breakLength:e.breakLength+1}})):void 0;case"break-decrement,current:Break":return this.state.breakLength>1?void this.setState((function(e){return{breakLength:e.breakLength-1,timeLeft:e.timeLeft-60}})):void 0;case"break-increment,current:Break":return this.state.breakLength<60?void this.setState((function(e){return{breakLength:e.breakLength+1,timeLeft:e.timeLeft+60}})):void 0;case"session-decrement,current:Session":return this.state.sessionLength>1?void this.setState((function(e){return{sessionLength:e.sessionLength-1,timeLeft:e.timeLeft-60}})):void 0;case"session-increment,current:Session":return this.state.sessionLength<60?void this.setState((function(e){return{sessionLength:e.sessionLength+1,timeLeft:e.timeLeft+60}})):void 0;case"session-decrement,current:Break":return this.state.sessionLength>1?void this.setState((function(e){return{sessionLength:e.sessionLength-1}})):void 0;case"session-increment,current:Break":return this.state.sessionLength<60?void this.setState((function(e){return{sessionLength:e.sessionLength+1}})):void 0;default:return}}},{key:"tick",value:function(){var e=this;if(this.state.timeLeft<=60?document.getElementById("time-left").style.color="#F8BFCE":document.getElementById("time-left").style.color=null,this.state.timeLeft<=0){clearInterval(this.intervalID),document.getElementById("beep").play();var t="Session"===this.state.currentCounting?"Break":"Session",n="Session"===this.state.currentCounting?60*this.state.breakLength:60*this.state.sessionLength;return document.getElementById("time-left").style.color=null,this.setState({timeLeft:n,currentCounting:t}),void(this.intervalID=setInterval((function(){e.tick()}),1e3))}this.setState({timeLeft:this.state.timeLeft-1}),document.getElementsByTagName("title")[0].text="(".concat(this.clockify(this.state.timeLeft),") Pomodoro Clock")}},{key:"handleStartToggle",value:function(){var e=this;this.state.counting?clearInterval(this.intervalID):this.intervalID=setInterval((function(){e.tick()}),1e3),this.setState((function(t){return{counting:!e.state.counting}}))}},{key:"clockify",value:function(e){var t=Math.floor(e/60),n=e-60*t;return(t=t<10?"0"+t:t)+":"+(n=n<10?"0"+n:n)}},{key:"render",value:function(){var e=this,t=["Break","Session"].map((function(t){return s.a.createElement(h,{value:t,key:"".concat(t,"-panel"),currentCounting:e.state.currentCounting,length:"Break"===t?e.state.breakLength:e.state.sessionLength,handleInDecrement:e.handleInDecrement,handleDefaultBtn:e.handleDefaultBtn,lang:e.props.lang,LANG_MAP:e.props.LANG_MAP})}));return s.a.createElement("div",{id:"pomodoro-panel"},s.a.createElement("h1",null,"en"===this.props.lang?"Pomodoro Clock":this.props.LANG_MAP["Pomodoro Clock"]),s.a.createElement(g,{timeLeft:this.clockify(this.state.timeLeft),handleReset:this.handleReset,handleStartToggle:this.handleStartToggle,currentCounting:this.state.currentCounting,lang:this.props.lang,LANG_MAP:this.props.LANG_MAP}),s.a.createElement("div",{id:"control-panels-group",className:"btn-group"},t),s.a.createElement("audio",{id:"beep",preload:"auto",src:"https://raw.githubusercontent.com/tsunghao-huang/react-pomodoro/gh-pages/homeland.mp3"}))}}]),n}(s.a.Component),p=n(4),b=n(10);n(20);var v=function(e){var t=Object(r.useState)(""),n=Object(a.a)(t,2),l=n[0],o=n[1];return s.a.createElement("form",{onSubmit:function(t){t.preventDefault(),""!==l&&(e.addTask(l),o(""))}},s.a.createElement("h2",{className:"label-wrapper"},s.a.createElement("label",{htmlFor:"new-todo-input",className:"label__lg"},"en"===e.lang?"What needs to be done?":e.LANG_MAP["What needs to be done?"])),s.a.createElement("input",{type:"text",id:"new-todo-input",className:"input input__lg",name:"text",autoComplete:"off",value:l,onChange:function(e){o(e.target.value)}}),s.a.createElement("button",{type:"submit",className:"btn btn__primary btn__lg"},"en"===e.lang?"Add":e.LANG_MAP.Add))};var k=function(e){return s.a.createElement("button",{type:"button",className:"btn toggle-btn","aria-pressed":e.isPressed,onClick:function(){return e.setFilter(e.name)}},s.a.createElement("span",{className:"visually-hidden"},"Show "),s.a.createElement("span",null,"en"===e.lang?e.name:e.LANG_MAP[e.name]," "),s.a.createElement("span",{className:"visually-hidden"}," tasks"))};function L(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current}function E(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null),l=Object(r.useState)(!1),o=Object(a.a)(l,2),c=o[0],i=o[1],u=Object(r.useState)(e.name),m=Object(a.a)(u,2),d=m[0],h=m[1],g=L(c);var f=s.a.createElement("form",{className:"stack-small",onSubmit:function(t){t.preventDefault(),""!==t.target.value&&(e.editTask(e.id,d),i(!1))}},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"todo-label",htmlFor:e.id},"en"===e.lang?"New name for ".concat(e.name):"".concat(e.name," \u7684\u65b0\u540d\u5b57")),s.a.createElement("input",{id:e.id,className:"todo-text",type:"text",value:d,onChange:function(e){h(e.target.value)},ref:t})),s.a.createElement("div",{className:"btn-group"},s.a.createElement("button",{type:"button",className:"btn todo-cancel",onClick:function(){return i(!1)}},"en"===e.lang?"Cancel":e.LANG_MAP.Cancel,s.a.createElement("span",{className:"visually-hidden"},"renaming ",e.name)),s.a.createElement("button",{type:"submit",className:"btn btn__primary todo-edit"},"en"===e.lang?"Save":e.LANG_MAP.Save,s.a.createElement("span",{className:"visually-hidden"},"new name for ",e.name)))),p=s.a.createElement("div",{className:"stack-small"},s.a.createElement("div",{className:"c-cb"},s.a.createElement("input",{id:e.id,type:"checkbox",defaultChecked:e.completed,onChange:function(){return e.toggleTaskCompleted(e.id)}}),s.a.createElement("label",{className:"todo-label",htmlFor:e.id},e.name)),s.a.createElement("div",{className:"btn-group"},s.a.createElement("button",{type:"button",className:"btn",onClick:function(){return i(!0)},ref:n},"en"===e.lang?"Edit":e.LANG_MAP.Edit,s.a.createElement("span",{className:"visually-hidden"},e.name)),s.a.createElement("button",{type:"button",className:"btn btn__danger",onClick:function(){return e.deleteTask(e.id)}},"en"===e.lang?"Delete":e.LANG_MAP.Delete,s.a.createElement("span",{className:"visually-hidden"},e.name))));return Object(r.useEffect)((function(){!g&&c&&(t.current.select(),t.current.focus()),g&&!c&&n.current.focus()}),[g,c]),s.a.createElement("li",{className:"todo stack-small"},c?f:p)}var N=n(13),A={All:function(){return!0},Active:function(e){return!e.completed},Completed:function(e){return e.completed}},y=Object.keys(A);function C(e){null===localStorage.getItem("localTodo")&&localStorage.setItem("localTodo",JSON.stringify(e.tasks));var t=JSON.parse(localStorage.getItem("localTodo")),n=Object(r.useState)(t),l=Object(a.a)(n,2),o=l[0],c=l[1],i=Object(r.useState)("All"),u=Object(a.a)(i,2),m=u[0],d=u[1];function h(e){localStorage.setItem("localTodo",JSON.stringify(e))}function g(e){var t=o.map((function(t){return e===t.id?Object(p.a)(Object(p.a)({},t),{},{completed:!t.completed}):t}));c(t),h(t)}function f(e){var t=o.filter((function(t){return e!==t.id}));c(t),h(t)}function C(e,t){var n=o.map((function(n){return e===n.id?Object(p.a)(Object(p.a)({},n),{},{name:t}):n}));c(n),h(n)}var S,O=o.filter(A[m]).map((function(t){return s.a.createElement(E,{id:t.id,name:t.name,completed:t.completed,key:t.id,toggleTaskCompleted:g,deleteTask:f,editTask:C,lang:e.lang,LANG_MAP:e.LANG_MAP})})),j=y.map((function(t){return s.a.createElement(k,{key:t,name:t,isPressed:t===m,setFilter:d,lang:e.lang,LANG_MAP:e.LANG_MAP})})),_=1!==O.length?"tasks":"task";if("en"===e.lang)switch(m){case"All":S="".concat(O.length," ").concat(_," in total");break;default:S="".concat(O.length," ").concat(_," ").concat(m.toLowerCase())}else S="".concat(e.LANG_MAP[m]," ").concat(O.length," \u4ef6\u4e8b");var P=Object(r.useRef)(null),I=L(o.length);return Object(r.useEffect)((function(){o.length-I===-1&&P.current.focus()}),[o.length,I]),s.a.createElement("div",{id:"todoapp",className:"stack-large"},s.a.createElement("h1",null,"en"===e.lang?"Todos":e.LANG_MAP.Todos),s.a.createElement(v,{addTask:function(e){var t={id:"todo-"+Object(N.a)(),name:e,completed:!1};c([].concat(Object(b.a)(o),[t])),h([].concat(Object(b.a)(o),[t]))},lang:e.lang,LANG_MAP:e.LANG_MAP}),s.a.createElement("div",{className:"filters btn-group stack-exception"},j),s.a.createElement("h2",{id:"list-heading",tabIndex:"-1",ref:P},S),s.a.createElement("ul",{role:"list",className:"todo-list stack-large stack-exception","aria-labelledby":"list-heading"},O))}var S=[{id:"todo-0",name:"Eat",completed:!0},{id:"todo-1",name:"Sleep",completed:!1},{id:"todo-2",name:"Repeat",completed:!1}],O={"Pomodoro Clock":"\u8543 \u8304 \u9418",Session:"\u5de5 \u4f5c",Break:"\u4f11 \u606f",Todos:"\u5f85\u8fa6\u4e8b\u9805","What needs to be done?":"\u6709\u4e8b\u55ce\uff1f",Add:"\u65b0\u589e",All:"\u5168\u90e8",Active:"\u5f85\u8fa6",Completed:"\u5b8c\u6210",Edit:"\u7de8\u8f2f",Delete:"\u522a\u9664",Cancel:"\u53d6\u6d88",Save:"\u5132\u5b58"};function j(){var e=Object(r.useState)("en"),t=Object(a.a)(e,2),n=t[0],l=t[1];return s.a.createElement("div",{id:"App"},s.a.createElement("button",{"aria-label":"switch language to ".concat("en"===n?"Mandarin":"English"),id:"language-btn",onClick:function(){l("en"===n?"zh-TW":"en"),document.documentElement.setAttribute("lang",n)}},"en"===n?"\u7e41\u9ad4\u4e2d\u6587":"English"),s.a.createElement(f,{lang:n,LANG_MAP:O}),s.a.createElement(C,{tasks:S,lang:n,LANG_MAP:O}))}o.a.render(s.a.createElement(j,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.e60557fb.chunk.js.map